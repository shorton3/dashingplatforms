<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>DashingPlatforms: ThreadManager Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">DashingPlatforms
   &#160;<span id="projectnumber">1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="classThreadManager-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">ThreadManager Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="ThreadManager_8h_source.html">ThreadManager.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for ThreadManager:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classThreadManager.png" usemap="#ThreadManager_map" alt=""/>
  <map id="ThreadManager_map" name="ThreadManager_map">
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a18eb12d3d752075318c3672c8efffd5b"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classThreadManager.html#a18eb12d3d752075318c3672c8efffd5b">~ThreadManager</a> ()</td></tr>
<tr class="separator:a18eb12d3d752075318c3672c8efffd5b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af4e876a66cab209981f3b0da6d1d83c9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classThreadManager.html#af4e876a66cab209981f3b0da6d1d83c9">apply</a> (void)</td></tr>
<tr class="separator:af4e876a66cab209981f3b0da6d1d83c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a8a79a0ed44f30d6b8d385f6a7cceefad"><td class="memItemLeft" align="right" valign="top">static ACE_thread_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classThreadManager.html#a8a79a0ed44f30d6b8d385f6a7cceefad">createThread</a> (ACE_THR_FUNC function, void *functionArgs, const char *threadName, bool shouldRestart, long threadFlags=THR_NEW_LWP|THR_JOINABLE|THR_SCHED_DEFAULT, long priority=ACE_DEFAULT_THREAD_PRIORITY, int threadGroup=-1, size_t stackSize=0)</td></tr>
<tr class="separator:a8a79a0ed44f30d6b8d385f6a7cceefad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8217c2cb5f3c72297403d267354545ce"><td class="memItemLeft" align="right" valign="top">static ACE_thread_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classThreadManager.html#a8217c2cb5f3c72297403d267354545ce">createThreadPool</a> (size_t Nthreads, ACE_THR_FUNC function, void *functionArgs, const char *threadName, bool shouldRestart, long threadFlags=THR_NEW_LWP|THR_JOINABLE|THR_SCHED_DEFAULT, long priority=ACE_DEFAULT_THREAD_PRIORITY, int threadGroup=-1, size_t stackSize=0)</td></tr>
<tr class="separator:a8217c2cb5f3c72297403d267354545ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p><a class="el" href="classThreadManager.html">ThreadManager</a> wraps the ACE Thread mechanism in order to provide Thread monitoring, Thread naming, and death detection and restart capabilities. </p>
<p>The main developer interface is the <a class="el" href="classThreadManager.html#a8a79a0ed44f30d6b8d385f6a7cceefad">createThread()</a> method, which returns an OS-assigned unique thread Id. This thread id can be stored by the application and used with the ACE_Thread_Manager class for suspending, resuming, waiting on, or managing groups of threads (see ace/Thread_Manager.h). </p>
<p>In the case of <a class="el" href="classThreadManager.html#a8217c2cb5f3c72297403d267354545ce">createThreadPool()</a>, a pointer to an array of ACE_Thread_t Thread Ids is returned&ndash;one for each of the N threads. </p>
<p>In the event of a thread death/restart, we cannot just re-call createThread from the space of the ACE_At_Exit handler, as the ACE_Thread_Manager is locked (we are inside the lock), and we will need to lock it to call 'spawn', and that would result in a DEADLOCK. Therefore, our strategy is to post the thread details (threadparameters) to a static map, and have an independent thread periodically every second or so check to see if the map contains any threads that need restarting. Any other strategies for notification and restart of the thread are very complex! </p>
<p>ALSO NOTE:!! Upon restart, the thread Id originally made available to the application for this thread will be invalid. We can (IN THE FUTURE) allow the application developer to pass in a call back function (with unsigned long parameter) that can be called and passed the new Thread Id. </p>
<dl class="section rcs"><dt>Author</dt><dd>Stephen Horton</dd></dl>
<dl class="section rcs"><dt>Revision</dt><dd>1</dd></dl>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a18eb12d3d752075318c3672c8efffd5b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">ThreadManager::~ThreadManager </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Virtual Destructor </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="af4e876a66cab209981f3b0da6d1d83c9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ThreadManager::apply </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Inheritied from ACE_At_Thread_Exit. Gets called upon thread death/exit. </p>

</div>
</div>
<a class="anchor" id="a8a79a0ed44f30d6b8d385f6a7cceefad"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">ACE_thread_t ThreadManager::createThread </td>
          <td>(</td>
          <td class="paramtype">ACE_THR_FUNC&#160;</td>
          <td class="paramname"><em>function</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>functionArgs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>threadName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>shouldRestart</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>threadFlags</em> = <code>THR_NEW_LWP&#160;|&#160;THR_JOINABLE&#160;|&#160;THR_SCHED_DEFAULT</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>priority</em> = <code>ACE_DEFAULT_THREAD_PRIORITY</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>threadGroup</em> = <code>-1</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>stackSize</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Main Thread creation API </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">function</td><td>Static C++ method or C-style function to start the new thread with </td></tr>
    <tr><td class="paramname">functionArgs</td><td>Array of arguments to pass to the function as parameters </td></tr>
    <tr><td class="paramname">threadName</td><td>String identifier that should be unique to each thread </td></tr>
    <tr><td class="paramname">shouldRestart</td><td>'true' if the thread should be restarted upon exit;otherwise, it will be allowed to terminate </td></tr>
    <tr><td class="paramname">threadFlags</td><td>define the characteristics of the thread </td></tr>
    <tr><td class="paramname">priority</td><td>is the relative priority of the new thread (from 1 to 127). Specifying priority other than the default is Discouraged, and should only be used RARELY! </td></tr>
    <tr><td class="paramname">threadGroup</td><td>can be provided if thread pooling or grouping is desired. </td></tr>
    <tr><td class="paramname">stackSize</td><td>specifies the size of the stack allocated for this thread </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the unique thread Id upon success; otherwise 0 upon failure. In Linux, this is an unsigned long (see /usr/include/bits/pthread_types.h), so cannot use ERROR </dd></dl>

<p>Referenced by <a class="el" href="classLocalSMMailbox.html#a0a392404de9ca6224d0ed114c260b26a">LocalSMMailbox::activate()</a>, <a class="el" href="classDistributedMailbox.html#a58ee18029660253156c84afb579266ca">DistributedMailbox::createMailbox()</a>, <a class="el" href="classLocalSMMailbox.html#a68bdc7dd5d5b5cec2b8a1b86c2a02d07">LocalSMMailbox::createMailbox()</a>, <a class="el" href="classGroupMailbox.html#a2c557e67a0ddc8518623d9cedcaa283f">GroupMailbox::createMailbox()</a>, <a class="el" href="classLocalMailbox.html#a42ed8ce49b76ecf0ccb4c3adde573af3">LocalMailbox::createMailbox()</a>, <a class="el" href="classThreadManager.html#a8217c2cb5f3c72297403d267354545ce">createThreadPool()</a>, <a class="el" href="classResourceMonitor.html#a64f01887447b742b08184891ca06e5c2">ResourceMonitor::initialize()</a>, <a class="el" href="classProcessManager.html#ac75d8c9ecdc6a14fe6be17e3373858b3">ProcessManager::initialize()</a>, <a class="el" href="classFaultManager.html#a801cf6c046d9cebae73229a3378bcee1">FaultManager::initialize()</a>, and <a class="el" href="classMailboxLookupService.html#a82138b36a836f680ef5d82a6f7373549">MailboxLookupService::initializeDiscoveryManager()</a>.</p>

</div>
</div>
<a class="anchor" id="a8217c2cb5f3c72297403d267354545ce"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">ACE_thread_t * ThreadManager::createThreadPool </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>Nthreads</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ACE_THR_FUNC&#160;</td>
          <td class="paramname"><em>function</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>functionArgs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>threadName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>shouldRestart</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>threadFlags</em> = <code>THR_NEW_LWP&#160;|&#160;THR_JOINABLE&#160;|&#160;THR_SCHED_DEFAULT</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>priority</em> = <code>ACE_DEFAULT_THREAD_PRIORITY</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>threadGroup</em> = <code>-1</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>stackSize</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Thread Pool creation API </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Nthreads</td><td>Number of threads to create in the pool </td></tr>
    <tr><td class="paramname">function</td><td>Static C++ method or C-style function to start the new thread with </td></tr>
    <tr><td class="paramname">functionArgs</td><td>Array of arguments to pass to the function as parameters </td></tr>
    <tr><td class="paramname">threadName</td><td>String identifier that should be unique to each thread </td></tr>
    <tr><td class="paramname">shouldRestart</td><td>'true' if the thread should be restarted upon exit;otherwise, it will be allowed to terminate </td></tr>
    <tr><td class="paramname">threadFlags</td><td>define the characteristics of the thread </td></tr>
    <tr><td class="paramname">priority</td><td>is the relative priority of the new thread (from 1 to 127). Specifying priority other than the default is Discouraged, and should only be used RARELY! </td></tr>
    <tr><td class="paramname">threadGroup</td><td>can be provided if thread pooling or grouping is desired. </td></tr>
    <tr><td class="paramname">stackSize</td><td>specifies the size of the stack allocated for this thread </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Pointer array of unique thread Ids upon success; otherwise 0 upon failure. This array of ACE_Thread_t thread ids is allocated on the heap, so ownership is deferred to the application owner. In Linux, these values are unsigned longs (see /usr/include/bits/pthread_types.h), so cannot use ERROR </dd></dl>

<p>References <a class="el" href="classThreadManager.html#a8a79a0ed44f30d6b8d385f6a7cceefad">createThread()</a>.</p>

<p>Referenced by <a class="el" href="classMailboxProcessor.html#a464c9e9eb3df8dd68a72df4b37a61b0f">MailboxProcessor::processMailbox()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="ThreadManager_8h_source.html">ThreadManager.h</a></li>
<li>ThreadManager.cpp</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
